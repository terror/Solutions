#!/usr/bin/env python3

import os

LINK = 'https://github.com/terror/solution/blob/master'

def traverse(exclude):
  ret = {}
  for root, dirs, files in os.walk(".", topdown=True):
    if sum([x in root for x in exclude]) or root == ".":
      continue
    ret[root[2:]] = len(os.listdir(root))
  return ret

def write(text):
  with open('README.md', 'w+') as file:
    file.write(text)

def main(directories):
  write(
    ''.join(
      list(
        map(
          lambda pair: "[{}]({}/{}) ({})<br/>\n".
          format(pair[0], LINK, "%20".join(pair[0].split()), pair[1]),
          sorted(directories.items())
        )
      )
    )
  )

if __name__ == '__main__':
  main(traverse(['.git', 'bin', 'mcgill']))
